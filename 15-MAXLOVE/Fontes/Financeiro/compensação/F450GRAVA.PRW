#INCLUDE "PROTHEUS.CH"

User Function F450GRAVA()

If Alltrim(TRB->P_R)$"R"
	RecLock("TRB",.F.)
	TRB->CHAVE	:=	SE1->E1_FILIAL+STR(SE1->E1_VALOR,2)+SE1->E1_PREFIXO+SE1->E1_NUM+SE1->E1_PARCELA+SE1->E1_TIPO 
	MsUnLock()
Else
	RecLock("TRB",.F.)
	TRB->CHAVE	:=	SE2->E2_FILIAL+STR(SE2->E2_VALOR,2)+SE2->E2_PREFIXO+SE2->E2_NUM+SE2->E2_PARCELA+SE2->E2_TIPO 
	MsUnLock()
EndIf

Return 