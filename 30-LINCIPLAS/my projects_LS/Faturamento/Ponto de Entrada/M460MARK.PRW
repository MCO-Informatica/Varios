#INCLUDE 'PROTHEUS.CH'

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//	Programa: M460MARK
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
User Function M460MARK()
////////////////////////
Local _lRet := .T.

If !U_LS_M460PROC()  // VERIFICA SE QUANTIDADES ESTÃO OK.
	Return(.f.)
EndIf

If PA6->(DbSeek(xFilial('PA6') + SC9->C9_PEDIDO + SC9->C9_FILIAL,.f.)) 
	Aviso('Documento de saída',"O pedido desta NF possui romaneio. Favor concluir o fluxo operacional pela rotina de distribuição. Romaneio nro.: " + alltrim(PA6->PA6_NUMROM) ,{'OK'},3)
	_lRet := .F.
EndIf	
          
If SC9->C9_SEQUEN > '01'
	a460Estorna()         
	_lRet := .f.
EndIf	

Return(_lRet)